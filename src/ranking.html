<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ranking - Semana de Recepção IME - USP</title>
    <link rel="icon" href="assets/images/ico.png" type="image/x-icon" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
        integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link rel="stylesheet" href="style/reset.css" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

    <link rel="stylesheet" href="style/global.css" />
    <link rel="stylesheet" href="style/header.css">
    <link rel="stylesheet" href="style/footer.css">

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="flex flex-col min-h-screen" name="ranking">
    <header>
        <nav class="z-2 w-full h-fit md:h-20 bg-(--bg-header)">
            <div class="w-full h-full flex flex-col md:flex-row justify-between items-center">
                <a class="flex-shrink-0 h-20 md:h-full w-auto">
                    <img src="assets/logosemana.png" id="logo" class="h-20 md:h-full w-auto"
                        alt="Logo da Semana de Recepção IME USP">
                </a>

                <input type="checkbox" id="btn-menu" class="hidden peer" />
                <label for="btn-menu" class="cursor-pointer block md:hidden items-center"
                    aria-label="Ícone do menu hamburguer">☰</label>

                <ul class="w-full md:w-fit flex flex-col md:flex-row items-center gap-0
            duration-400 transition-all max-h-0 md:max-h-none md:h-full overflow-hidden peer-checked:max-h-96">
                    <li id="link-principal" class="w-full md:w-fit">
                        <a href="index.html">Página Principal</a>
                    </li>
                    <li id="link-FAQ" class="w-full md:w-fit">
                        <a href="faq.html">FAQ</a>
                    </li>
                    <li id="link-ime" class="w-full md:w-fit">
                        <a href="ime.html">O IME</a>
                    </li>
                    <li id="link-ranking" class="w-full md:w-fit">
                        <a href="ranking.html">Ranking</a>
                    </li>
                    <li id="link-fotos" class="w-full md:w-fit">
                        <a href="https://sites.google.com/view/recepcaoimeusp" target="_blank">Fotos</a>
                    </li>
                    <li id="link-videos" class="w-full md:w-fit">
                        <a href="https://drive.google.com/drive/folders/1Rje607bFQQOlgvBoRSubSEjzc0EV1LMF"
                            target="_blank">Vídeos</a>
                    </li>
                </ul>
            </div>
        </nav>
    </header>

    <main class="md:container mx-auto mt-10 px-4 md:px-0 flex items-center justify-center">
        <div class="max-w-5xl w-full bg-white p-8 rounded-lg shadow-lg">
            <canvas id="myChart"></canvas>
        </div>
    </main>

    <div class="grow"></div>
    <footer class="z-1 w-full h-30 md:h-20 bg-(--bg-footer)">
        <div class="w-full h-full flex flex-col md:flex-row justify-between items-center">
            <div id="trademark" class="text-center content-center h-full">
                Comissão de Recepção IME-USP © 2026
            </div>

            <ul class="w-1/2 md:w-40 h-full flex justify-around items-center">
                <li id="link-instagram" class="flex icon">
                    <a href="https://www.instagram.com/imeusp.recepcao/" target="_blank" class="fa-brands fa-instagram"
                        aria-label="Link para o Instagram da Comissão de Recepção"></a>
                </li>
                <li id="link-tiktok" class="flex icon">
                    <a href="https://www.tiktok.com/@imeusp.recepcao" target="_blank" class="fa-brands fa-tiktok"
                        aria-label="Link para o Tiktok da Comissão de Recepção"></a>
                </li>
            </ul>
        </div>
    </footer>

<script>
    let myChart = null;
    const sheetUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSf6GbvneRrzybgREVlf08kDJmniJG2EyTyMM1FHhXl5eIRRkrE49FuRGoOXkSE1Q/pub?gid=271482103&single=true&output=csv';

    async function loadData() {
        try {
            const response = await fetch(sheetUrl);
            const csvText = await response.text();
            const rows = csvText.split('\n').filter(row => row.trim());

            const labels = [];
            const data = [];

            for (let i = 9; i < 15 && i < rows.length; i++) {
                const cols = rows[i].split(',');
                if (cols[1] && cols[2]) {
                    labels.push(cols[1].trim());
                    data.push(parseFloat(cols[2].trim()));
                }
            }

            const ctx = document.getElementById('myChart').getContext('2d');
            if (myChart) myChart.destroy();

            myChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Pontos',
                        data: data,
                        backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF']
                    }]
                }
            });
        } catch (error) {
            console.error('Erro:', error);
        }
    }

    window.addEventListener('DOMContentLoaded', loadData);
</script>

<script src="scripts/header.js"></script>
</body>
</html>
